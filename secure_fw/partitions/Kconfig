#-------------------------------------------------------------------------------
# Copyright (c) 2022, Arm Limited. All rights reserved.
#
# SPDX-License-Identifier: BSD-3-Clause
#
#-------------------------------------------------------------------------------

menu "Secure partitions"
config TFM_PARTITION_CRYPTO
    bool "Crypto"
    default y

if TFM_PARTITION_CRYPTO

    config CRYPTO_HW_ACCELERATOR
        bool "Enable the crypto hardware accelerator"
        default n

    config CRYPTO_TFM_BUILTIN_KEYS_DRIVER
        bool "Allow crypto service to store builtin keys"
        default y
        help
          Whether to allow crypto service to store builtin keys. Without this,
          all builtin keys must be stored in a platform-specific location.
endif

config TFM_PARTITION_INITIAL_ATTESTATION
    bool "Initial attestation"
    default y

config TFM_PARTITION_INTERNAL_TRUSTED_STORAGE
    bool "Internal Trusted Storage"
    default y

config TFM_PARTITION_PLATFORM
    bool "Platform"
    default y

comment "Firmware update depends on partition Platform"
    depends on !TFM_PARTITION_PLATFORM

config TFM_PARTITION_FIRMWARE_UPDATE
    bool "Firmware update"
    default n
    depends on TFM_PARTITION_PLATFORM

comment "Protected Storage depends on partition ITS and Platform"
    depends on !(TFM_PARTITION_INTERNAL_TRUSTED_STORAGE && TFM_PARTITION_PLATFORM)

config TFM_PARTITION_PROTECTED_STORAGE
    bool "Protected Storage"
    default y
    depends on TFM_PARTITION_INTERNAL_TRUSTED_STORAGE && TFM_PARTITION_PLATFORM
    help
      PS only uses the platform partition when PS_ROLLBACK_PROTECTION is ON,
      but the dependency in the manifest file means the dependency is
      unconditional.
endmenu
